# 객체지향의 사실과 오해

## 목표
객체지향을 철학으로 바라보고, 흔한 오해를 바로잡기

## 객체의 정의 : 상태·행동·식별자를 캡슐화한 것

- 객체(Object) = 상태(state) + 행동(behavior) + 식별자(identity)

- **엔티티(Entity) / 참조 객체(Reference Object): 식별자가 중요 (예: 주문 ID, 사용자 ID)

- 값 객체(Value Object): 값이 중요, 식별자 없음 (예: Money, Address)

### 자바에서의 동등성 구현 예

- User (엔티티): 시스템 내에서 누구를 식별하기 위한 고유 ID 보유

```java
/** 엔티티: 식별자(id)가 객체 정체성을 나타낸다 */
class User {
    private final String id;      // 식별자
    private String name;

    // equals / hashCode — ID만 사용
    @Override
    public boolean equals(Object o) {
        return o instanceof User u && id.equals(u.id);
    }

    @Override
    public int hashCode() {
        return id.hashCode();
    }
}    
```

- Money (값 객체): 금액·통화 조합으로 무엇인지 표현, 주로 불변(immutable)

```java
/** 값 객체: 불변(immutable)하고 값 비교 */
class Money {
    private final int amount;
    private final String currency;

    // equals / hashCode — 값 비교
    @Override
    public boolean equals(Object o) {
        return o instanceof Money m && amount == m.amount && currency.equals(m.currency);
    }

    @Override
    public int hashCode() {
        return Objects.hash(amount, currency);
    }
}
```     
**포인트:** 엔티티는 누구냐가 중요 → ID 기반 비교, 값 객체는 무엇이냐가 중요 → 상태 전체 기반 비교

### 상태(State)와 프로퍼티(Property)

- 프로퍼티(Property): 객체의 상태를 구성하는 모든 특징의 집합. 정적 메타정보이며 두 가지로 나뉜다.

1. 속성(Attribute) : 단순 값으로 표현되는 특징 (예: 이름, 금액)

2. 링크(Link) : 다른 객체를 참조하는 포인터 → 연관관계의 인스턴스 (예: 주문 → 고객)

- 프로퍼티의 값(Value): 실행 중 동적으로 변할 수 있는 데이터. 시간에 따라 달라질 수 있다.

- 상태(State): 특정 시점에 객체가 가진 모든 프로퍼티 값의 스냅샷. 시간이 흐르며 상태가 변한다.

### Immutable vs Mutable vs Mutable

- Immutable 객체: 생성 후 상태 불변 → 공유 안전, 테스트 용이예: Money, LocalDate

- Mutable 객체: 행동에 따라 상태 변경 → 라이프사이클 관리 필요예: User의 이름, Order의 상태

### 동등성(Equality)란?

(Equality)란?

참조 동일성(==) : 메모리 주소가 같음 → 같은 인스턴스

의미적 동등성(equals) : 객체가 의미적으로 같음 → 우리가 정의

equals()와 hashCode() 계약└ equals가 true이면 hashCode도 같아야 함└ 컬렉션(Set, Map)에서 필수

객체는 상태와 행동을 함께 가지는 실체입니다.
객체는 스스로 자신의 상태를 관리하며 다른 객체와 협력합니다.
